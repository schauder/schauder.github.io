---
layout: post
status: publish
published: true
title: Code Coverage, what is it good for?
author:
  display_name: Jens Schauder
  login: admin
  email: jens@schauderhaft.de
  url: http://blog.schauderhaft.de
author_login: admin
author_email: jens@schauderhaft.de
author_url: http://blog.schauderhaft.de
wordpress_id: 103
wordpress_url: http://blog.schauderhaft.de/2008/10/20/code-coverage-what-is-it-good-for/
date: '2008-10-20 16:44:01 +0200'
date_gmt: '2008-10-20 15:44:01 +0200'
categories:
- Softwareentwicklung
- Quality Management
tags: []
comments:
- id: 55
  author: denglisch
  author_email: ''
  author_url: http://SNOW
  date: '2008-10-21 19:02:31 +0200'
  date_gmt: '2008-10-21 18:02:31 +0200'
  content: Bitte schreibe nicht mehr auf Englisch, da versteht man ja kaum was
- id: 4374
  author: visualizacion
  author_email: gadsden1050@gmail.com
  author_url: http://visualizacion
  date: '2011-10-16 13:32:46 +0200'
  date_gmt: '2011-10-16 11:32:46 +0200'
  content: The very crux of your writing while appearing reasonable at first, did
    not settle properly with me personally after some time. Somewhere within the paragraphs
    you were able to make me a believer unfortunately just for a very short while.
    I however have got a problem with your jumps in logic and one would do well to
    fill in those gaps. In the event that you actually can accomplish that, I could
    surely end up being amazed.
---
<p>Today I read in short succession two articles about the code coverage metric, its use and potential harm.</p>
<p>First I read <a href="http:&#47;&#47;www.dcmanges.com&#47;blog&#47;increasing-code-coverage-may-be-harmful">Increasing Code Coverage May Be Harmful<&#47;a> where Dan Mange describes how adding tests just to increase code coverage might cause problems. Secondly <span class="submitted">Meera Subbarao asks <&#47;span><a href="http:&#47;&#47;java.dzone.com&#47;articles&#47;is-code-coverage-important">is code coverage important<&#47;a>?</p>
<p>I think there are a lot of problems with the whole code coverage discussion. The phrase with 'tool' and 'fool' comes to ones mind.</p>
<p>So this is my list of problems I have with 99% of all code coverage discussions</p>
<ol>
<li>Code coverage isn't properly defined at all. Are you talking about statement, block, path, method coverage? What exact flavor thereof? With out defining it the term code coverage is pretty much useless.<&#47;li>
<li>Any kind of Code Coverage of 100% percent suggests some kind of completeness of the test. Which is pretty much bullshit. If your tests are wrong, coverage says nothing. If your test is correct (in the sense of checking for the correct result) it doesn't mean the code will have the correct result in all possible cases. Other things like configurations, annotations and third party libraries, including operating systems and hardware often go completely untested although some metric says we have a code coverage of 100%. So it is important to realize 100% code coverage of your preferred flavor is just some completely arbitrary degree of completness for the test suite.<&#47;li>
<li>Closely to related to the second point is the assumed ideal of a completely tested code base. Such a complete coverage in the sense of guaranteed surfacing of every possible contained bug is impossible. No matter how trivial you program is. Even for the most trivial program it is easily possible to construct hundreds of testcases.<&#47;li>
<li>In most projects only automated unit tests contribute to reported code coverage. But normally there is a lot of manual testing to accompany that. So while 100% coverage doesn't mean there are no bugs, 30% doesn't mean the software is bug ridden.<&#47;li><br />
<&#47;ol><br />
So where is the real target for testing? As so often it is a tradeoff. A trade off between effort invested in development and maintanance of test code vs. uncovered bugs in the code base. So one needs to define the limitations in budget and the limitation in bugs to stay undetected in the codebase. Which again are constraint by feasability: Some kind of bugs are difficult to find by tests: Bugs in extremly simple code could hide, when the test code is more complex and therefore errorprone then the code under test. Other Bugs you cannot possibly find by tests: Features that are not required yet implemented (called surprises by Robert V. Binder in his book <a href="http:&#47;&#47;www.amazon.de&#47;gp&#47;product&#47;0201809389?ie=UTF8&amp;tag=schauderhafte-21&amp;linkCode=as2&amp;camp=1638&amp;creative=6742&amp;creativeASIN=0201809389">Testing Object Oriented Systems: Models, Patterns and Tools (Addison-Wesley Object Technology)<&#47;a>) as well as not implemented but required features.</p>
<p>When you are working on software that does not control life support systems nor large amounts of money I'd consider it quite naturally that quite a piece of the code isn't covered by automated tests at all but the tests concentrate on the most complex most error prone pieces of the software.</p>
<p>So what to do? Whenever your actions are controlled by just one number, stop it. Code Coverage is a valuable tool to find areas that need testing.</p>
<p>But before blindly writing tests ask some questions first.</p>
<ul>
<li>Do we need to increase the quality (in the meaning of decreasing the number of bugs). Ok most of the time the answer is a big yes to this one.<&#47;li>
<li>How much do we want to increase it.<&#47;li>
<li>How much are we willing to pay for that<&#47;li>
<li>What is the best way to increase the quality? Increase code coverage? Increase thoroughness of the test? Which in turn leads to the question of fault models (what kind of bugs are we looking for) and test strategies (how to hunt bugs effective AND efficient)<&#47;li><br />
<&#47;ul><br />
And if the team doesn't want to answer all these questions but still increase the code quality through test, I'd opt for some training possibly by reading the already mentioned book by <a href="http:&#47;&#47;www.amazon.de&#47;gp&#47;product&#47;0201809389?ie=UTF8&amp;tag=schauderhafte-21&amp;linkCode=as2&amp;camp=1638&amp;creative=6742&amp;creativeASIN=0201809389">Robert V. Binder<&#47;a>. I have some critism for the book as well, but that must wait for another post. It at least clarifies some facts about what tests can achieve and what they can't achieve.</p>
