---
layout: post
status: publish
published: true
title: Embrace Your Legacy Code. But Only Once.
author:
  display_name: Jens Schauder
  login: admin
  email: jens@schauderhaft.de
  url: http://blog.schauderhaft.de
author_login: admin
author_email: jens@schauderhaft.de
author_url: http://blog.schauderhaft.de
wordpress_id: 929
wordpress_url: http://blog.schauderhaft.de/?p=929
date: '2011-09-25 06:30:12 +0200'
date_gmt: '2011-09-25 04:30:12 +0200'
categories:
- Softwaredevelopment
tags:
- legacy
- onion
- abstraction
comments: []
---
<p>If you have to deal with legacy code (and we all do) one of the standard techniques to deal with it is to hide it behind a layer of abstraction.</p>
<p>While this is a valid pattern that helps in many cases, it comes with its own anti pattern. </p>
<p>I call it <strong>Legacy in an Onion<&#47;strong>. </p>
<p>It's what happens when every generation of developer considers whatever they find to be horrible legacy code.<br />
So they create a layer of abstraction. The next generation considers the abstraction to be legacy and adds another layer of abstraction.<br />
After a couple of generations all the different layers start to cause serious problems when trying to understand the code and possibly even when executing it.</p>
<p>So the next time you encounter legacy code and want to add a layer of abstraction, rub the legacy code a little. Maybe you can peel of a layer of abstraction. If you find such a layer, you have multiple options:</p>
<ul>
<li>
Improve it so it fits your needs<br />
<&#47;li>
<li>
Replace it with your layer<br />
<&#47;li>
<li>
Directly work with the stuff below the layer<br />
<&#47;li><br />
<&#47;ul></p>
<p>Just don't add a layer of abstraction just for the sake of adding a layer of abstraction.</p>
