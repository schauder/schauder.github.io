---
layout: default
status: publish
published: true
title: How to Create a Legacy Code Kata Source Code
author:
  display_name: Jens Schauder
  login: admin
  email: jens@schauderhaft.de
  url: http://blog.schauderhaft.de
author_login: admin
author_email: jens@schauderhaft.de
author_url: http://blog.schauderhaft.de
wordpress_id: 1512
wordpress_url: http://blog.schauderhaft.de/?p=1512
date: '2015-05-24 07:07:28 +0200'
date_gmt: '2015-05-24 05:07:28 +0200'
categories:
- article
- Softwaredevelopment
tags:
- learning
- legacy code
- workshop
comments:
- id: 400923
  author: davidvoelkel
  author_email: twitter.434292898@example.com
  author_url: https://twitter.com/davidvoelkel
  date: '2015-05-24 23:02:07 +0200'
  date_gmt: '2015-05-24 21:02:07 +0200'
  content: 'RT @jensschauder: I blogged: How to Create a Legacy Code Kata Source Code
    http://t.co/B06lJsiCwl'
---
<p>From time to time I do  a Clean Code Workshop for coworkers or customers. A large part of these workshops deals with legacy code. I always start with the <a href="https://github.com/jbrains/trivia">Ugly Trivia Game by J. B. Rainsberger</a>, which actually isn't by him, but I use his version anyway. While it is a great resource it gets boring after you have reviewed, tested, refactored, tested it some more and reviewed the tests and refactorings. Also: does it really look like the average legacy code we find in our projects? I don't think so. Real life legacy code has more dependencies and does more really stupid stuff. My favorite so far was a class that loaded stuff from the database in the constructor. Not fun.</p>
<p>Therefor I like to create a little code base for working with legacy code that is very realistic but still small enough so one can handle it in the setting of a workshop and it is actually really simple to do that:</p>
<p>First pick some class that is ugly. Big methods are great. Sometimes you come a cross classes that are super tangled with 2-5 other classes. Those are super awesome. Don't pick anything to large. A class with 5000 lines just create more work, not more learning opportunities.</p>
<p>Second copy that class (or that small class cluster) in a new project. No dependencies, none of the other stuff it works with. Most likely it wont compile, we gonna fix that in the next step.</p>
<p>Third fix all the compile problems using one of the following approaches:</p>
<ul>
<li>
Just add simple libraries like logging or Apache commons to the project.<br />
</li>
<li>
Create missing classes using your IDE, will all the right methods. If the methods look like getter and setter, actually make them getter and setter.<br />
</li>
<li>
If the methods look more complicated just throw a <tt>SomethingTerribleIsHappeningHere</tt> exception.<br />
</li></ul></p>
<p>This is really fast, works with 98% of all legacy code I came across so far and creates some mean challenges for working with legacy code.</p>
