<p><a href="2012&#47;12&#47;30&#47;dependencies-in-a-three-tiered-application">In my last post I wrote about the dependencies in a layered application<&#47;a>. There is another antipattern going on in many layered applications: Obsessive copying.</p>
<p>It might look like this:</p>
<p>The User Interface has some representation of the data input by the user, it gets copied over into some kind of transport object (<a href="&#47;2012&#47;09&#47;02&#47;naming-antipatterns&#47;">often suffixed TO (Arrrrgh)<&#47;a>), which then gets copied over into the domain representation of the data, and finally gets copied over into the persistence representation.</p>
<p>That's a lot of copying. Not good. In many cases this is just waste. Waste on the runtime side of things when all these objects have to get created and garbage collected and on the implementation side of things when all the stupid code doing the copying is created and maintained. If you look even closer you often see much more copying, when your nice objects get converted to XML, JSON or some other serialized form.</p>
<p>When you see something like this you should start asking questions: copied over?</p>
<p>There are cases where you need to do some copying. For example when you transfer data between layers that are physically separate you have to serialize and deserialize them. But if you want to go from <i>domain object<&#47;i> to <i>serialized data stream<&#47;i> do you have to go via a <i>transport object<&#47;i>? Sure it allows you to use some nice magic library to create your JSON or XML or whatever you want to use. But is it really easier to copy data into a TO and then magically convert it into a JSON structure instead of just creating the JSON structure in the first place, possibly using a little Builder pattern?</p>
<p>If you need different properties in your presentation layer do you have to copy all the stuff over from the domain object? Or maybe you can just provide a thin wrapper providing the additional properties?</p>
<p>I'm perfectly with you if you don't want the Hibernate mapped entities in your domain logic, because it is bleeding persistence logic in your domain logic. But if you don't use the Hibernate Entities, is Hibernate really offering a benefit for you?</p>
<p>And beware of reflection for copying. It looks promising in the beginning, but if copying makes any sense at all the structures are different and your reflection based code will become more and more complex and slow. Oh and you might note, that things like Hibernate make extensive use of reflection and&#47;or byte code manipulation.</p>
