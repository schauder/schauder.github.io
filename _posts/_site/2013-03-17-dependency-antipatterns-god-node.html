<p><a href="&#47;2013&#47;02&#47;24&#47;introducing-degraph-for-visualizing-package-dependencies&#47;">I wrote before<&#47;a> about the <a href="https:&#47;&#47;github.com&#47;schauder&#47;degraph">dependency analysis and visualization tool Degraph<&#47;a>. When you use such a tool to examine various projects you will find some patterns that stick out like a sore thumb. This is a first articles about &Acirc;&nbsp;such antipatterns, including my interpretation of what is going wrong and how to fix it.</p>
<p>I'm using the somewhat abstract term <strong>node<&#47;strong>, which might refer to a class, a package or even to a <strong>slice<&#47;strong> that you define, bundling classes according to some rule that you see fit. If you are confused by the terminology you might have a look at the <a href="https:&#47;&#47;github.com&#47;schauder&#47;degraph&#47;wiki&#47;Nomenclature">wiki page for Degraph, where I try to explain these terms<&#47;a>.</p>
<p><strong>God Node<&#47;strong></p>
<p>When you see a node in a dependency diagram that has tons of in and outgoing connections, you are looking at the death rays emitting from a god node. It does a lot of important things, that's why it depends on many other nodes. It also gets used by many things, which makes it even worse.</p>
<p><a href="http:&#47;&#47;blog.schauderhaft.de&#47;wp-content&#47;uploads&#47;2013&#47;03&#47;godObject.png"><img class="alignnone size-medium wp-image-1351" alt="godObject" src="http:&#47;&#47;blog.schauderhaft.de&#47;wp-content&#47;uploads&#47;2013&#47;03&#47;godObject-160x300.png" width="160" height="300" &#47;><&#47;a></p>
<p>You want to extract stuff from that node! Why? Because when it does so many things and depends on so many things, it is very likely you</p>
<ol>
<li>can't properly test it<&#47;li>
<li>have to change it very often<&#47;li>
<li>thereby over and over creating new bugs, that go undetected by your automatic tests.<&#47;li><br />
<&#47;ol><br />
If this is a simple node, i.e. it doesn't represent at least a package or a class with inner classes, may the god class have mercy with your soul. Do some refactoring of that monster, until you can extract some classes. Prefer to extract classes that encapsulate some of the dependencies to other class. This image show how this looks like with the a new class represented by an orange octagon.</p>
<p><img class="alignnone size-medium wp-image-1350" alt="godObjectDelegate" src="http:&#47;&#47;blog.schauderhaft.de&#47;wp-content&#47;uploads&#47;2013&#47;03&#47;godObjectDelegate-197x300.png" width="197" height="300" &#47;></p>
<p>An alternative start is to extract interfaces and make other parts of the application depend only on the interfaces. This will move remove some dependencies from the God Node and spread them among the new interface nodes, as sketched in the following image, with the introduced interfaces represented by orange octagons.</p>
<p><img class="alignnone size-medium wp-image-1349" alt="godObjectInterfaces" src="http:&#47;&#47;blog.schauderhaft.de&#47;wp-content&#47;uploads&#47;2013&#47;03&#47;godObjectInterfaces-73x300.png" width="73" height="300" &#47;></p>
<p>Note that</p>
<ol>
<li><span style="line-height: 13px;">Since the god node 'implements' the interface nodes it depends on them, not the other way round<&#47;span><&#47;li>
<li>Some third node has to inject the implementation (the god node) into the clients so it will have dependencies to both. This is basically what I described in an earlier article about <a href="http:&#47;&#47;blog.schauderhaft.de&#47;2011&#47;07&#47;17&#47;breaking-dependency-cylces&#47;">how to break dependency cycles<&#47;a>.<&#47;li><br />
<&#47;ol><br />
If this is a compound node have a look inside. Often it already exhibits a structure of it own. Look at the upcoming posts about Dependency Antipatterns for stuff to look out for.</p>
<p>&nbsp;</p>
